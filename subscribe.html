<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscribe Button with Loader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sora', sans-serif;
        }

        /* --- Button & Loader Base Styles --- */
        #subscribeBtn {
            position: relative; /* Crucial for positioning confetti inside */
            overflow: hidden;   /* Keeps confetti from flying out */
        }

        .loader-dots div {
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .loader-dots div:nth-child(1) { animation-delay: -0.32s; }
        .loader-dots div:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }

        .loader { display: none; }
        .loading .loader { display: flex; }
        
        /* --- THIS IS THE FIX --- */
        /* Use display: none to remove the text from the layout entirely */
        .loading .btn-text {
            display: none;
        }

        /* --- Subscribed State Animations --- */

        /* 1. The Text Reveal Animation */
        .subscribed-text {
            opacity: 0;
            transform: translateY(100%);
        }

        .subscribed .subscribed-text {
            animation: reveal-text 0.5s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards;
        }

        @keyframes reveal-text {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 2. The Confetti Burst Animation */
        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .confetti-piece {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #f0c420;
            border-radius: 50%;
            opacity: 0;
            transform: translate(-50%, -50%);
        }

        .subscribed .confetti-piece {
            animation: confetti-burst 0.8s ease-out forwards;
        }

        @keyframes confetti-burst {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(var(--x), var(--y)) rotate(360deg);
            }
        }

        .confetti-piece:nth-child(1) { --x: -60px; --y: -40px; background: #ff7a59; }
        .confetti-piece:nth-child(2) { --x: 60px; --y: -50px; background: #3498db; }
        .confetti-piece:nth-child(3) { --x: -30px; --y: 50px; background: #9b59b6; }
        .confetti-piece:nth-child(4) { --x: 40px; --y: 30px; background: #2ecc71; }
        .confetti-piece:nth-child(5) { --x: -70px; --y: 10px; background: #f1c40f; }
        .confetti-piece:nth-child(6) { --x: 70px; --y: 0px; background: #e74c3c; }
        .confetti-piece:nth-child(7) { --x: 0px; --y: -60px; background: #1abc9c; }
        .confetti-piece:nth-child(8) { --x: 0px; --y: 60px; background: #e67e22; }

    </style>
</head>
<body class="bg-gray-900 flex items-center justify-center min-h-screen">

    <button id="subscribeBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-lg shadow-lg focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex items-center justify-center w-48 h-12">
        
        <span class="btn-text">Subscribe</span>
        <div class="loader loader-dots space-x-1">
            <div></div> <div></div> <div></div>
        </div>
        <span class="subscribed-text absolute">Subscribed</span>
        <div class="confetti-container">
            <div class="confetti-piece"></div> <div class="confetti-piece"></div>
            <div class="confetti-piece"></div> <div class="confetti-piece"></div>
            <div class="confetti-piece"></div> <div class="confetto-piece"></div>
            <div class="confetti-piece"></div> <div class="confetti-piece"></div>
        </div>
    </button>

    <script>
        const subscribeBtn = document.getElementById('subscribeBtn');
        const btnText = subscribeBtn.querySelector('.btn-text');

        subscribeBtn.addEventListener('click', () => {
            if (subscribeBtn.classList.contains('loading') || subscribeBtn.disabled) return;

            subscribeBtn.classList.add('loading');
            subscribeBtn.disabled = true;

            setTimeout(() => {
                subscribeBtn.classList.remove('loading');
                subscribeBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                subscribeBtn.classList.add('bg-green-600', 'cursor-not-allowed');
                
                // We can now safely hide the original text permanently
                btnText.style.display = 'none';

                subscribeBtn.classList.add('subscribed');
                
            }, 4100);
        });
    </script>

</body>
</html>